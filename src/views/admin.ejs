<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= pageTitle %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>

    <script>
        if (!sessionStorage.getItem('token')) {
            window.location.href = '/login';
        }
    </script>

    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Painel CEEI</a>
        <div class="navbar-nav">
            <div class="nav-item text-nowrap">
                <a class="nav-link px-3" href="#" id="logout-button">Sair</a>
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Editar Perfil</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Posts do Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Parceiros</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Cargos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Info do Site</a>
                        </li>
                        <li class="nav-item" id="user-management-nav" style="display: none;">
                            <a class="nav-link" href="#">Gerenciar Admins</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">

                <div id="dashboard-view">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Dashboard</h1>
                    </div>
                    <p>Bem-vindo ao painel de administração! Selecione uma opção no menu ao lado para começar.</p>
                </div>
                <div id="user-management-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Gerenciar Administradores</h1>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">Adicionar Novo Admin</div>
                        <div class="card-body">
                            <form id="add-admin-form">
                                <div class="row">
                                    <div class="col-md-6 mb-3"><label for="admin-name" class="form-label">Nome
                                            Completo</label><input type="text" class="form-control"
                                            id="admin-name-input" required></div>
                                    <div class="col-md-6 mb-3"><label for="admin-cpf" class="form-label">CPF (será o
                                            login)</label><input type="text" class="form-control" id="admin-cpf-input"
                                            required></div>
                                    <div class="col-md-6 mb-3"><label for="admin-birthdate" class="form-label">Data de
                                            Nascimento</label><input type="date" class="form-control"
                                            id="admin-birthdate-input" required></div>
                                    <div class="col-md-6 mb-3"><label for="admin-password" class="form-label">Senha
                                            Provisória</label><input type="password" class="form-control"
                                            id="admin-password-input" required></div>
                                </div>
                                <button type="submit" class="btn btn-primary">Adicionar Admin</button>
                            </form>
                            <div id="admin-feedback" class="mt-3"></div>
                        </div>
                    </div>

                    <h4>Admins Atuais</h4>
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">Nome</th>
                                    <th scope="col">CPF (Login)</th>
                                    <th scope="col">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="admins-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="profile-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Editar Perfil</h1>
                    </div>

                    <form id="profile-form">
                        <div class="mb-3">
                            <label for="profile-name" class="form-label">Seu Nome</label>
                            <input type="text" class="form-control" id="profile-name-input" required>
                        </div>
                        <div class="mb-3">
                            <label for="profile-password-input" class="form-label">Nova Senha (deixe em branco para não
                                alterar)</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="profile-password-input">
                                <span class="input-group-text" id="toggle-password" style="cursor: pointer;">
                                    <i class="bi bi-eye-slash" style="color: black;"></i>
                                </span>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="profile-confirm-password-input" class="form-label">Confirme a Nova Senha</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="profile-confirm-password-input">
                                <span class="input-group-text" id="toggle-confirm-password" style="cursor: pointer;">
                                    <i class="bi bi-eye-slash" style="color: black;"></i>
                                </span>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </form>
                    <div id="profile-feedback" class="mt-3"></div>
                </div>

                <div id="site-info-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Gerenciar Informações do Site</h1>
                    </div>

                    <form id="site-info-form">
                        <div class="mb-3">
                            <label for="about-text" class="form-label">Texto da Seção "Sobre"</label>
                            <textarea class="form-control" id="about-text-input" rows="6"></textarea>
                        </div>
                        <h5 class="mt-4">Informações de Contato</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="phone1" class="form-label">Telefone de Contato 1</label>
                                <input type="text" class="form-control" id="phone1-input">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone2" class="form-label">Telefone de Contato 2 (Opcional)</label>
                                <input type="text" class="form-control" id="phone2-input">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email de Contato (do formulário)</label>
                            <input type="email" class="form-control" id="email-input">
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </form>
                    <div id="site-info-feedback" class="mt-3"></div>
                </div>
                <div id="partners-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Gerenciar Parceiros</h1>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            Adicionar Novo Parceiro
                        </div>
                        <div class="card-body">
                            <form id="partner-form">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="partner-name" class="form-label">Nome do Parceiro</label>
                                        <input type="text" class="form-control" id="partner-name-input" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="partner-image" class="form-label">Logo do Parceiro</label>
                                        <input type="file" class="form-control" id="partner-image-input"
                                            accept="image/*" required>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="partner-description" class="form-label">Descrição (para o hover)</label>
                                    <textarea class="form-control" id="partner-description-input" rows="3" required
                                        maxlength="256"></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Adicionar Parceiro</button>
                            </form>
                            <div id="partner-feedback" class="mt-3"></div>
                        </div>
                    </div>

                    <h4>Parceiros Atuais</h4>
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">Logo</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="partners-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="positions-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Gerenciar Cargos (Administração)</h1>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            Adicionar Novo Membro
                        </div>
                        <div class="card-body">
                            <form id="position-form">
                                <input type="hidden" id="position-id-input">
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="position-memberName-input" class="form-label">Nome do Membro</label>
                                        <input type="text" class="form-control" id="position-memberName-input" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="position-title-input" class="form-label">Cargo Hierárquico</label>
                                        <select class="form-select" id="position-title-input" required>
                                            <option value="" selected disabled>Selecione um cargo...</option>
                                            <option value="DIRETOR">Diretor</option>
                                            <option value="VICE_DIRETOR">Vice-Diretor</option>
                                            <option value="COORDENADOR">Coordenador</option>
                                            <option value="PROFESSOR">Professor</option>
                                            <option value="CORPO_TECNICO">Corpo Técnico</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3" id="position-title-detail-group" style="display: none;">
                                        <label for="position-title-detail-input" class="form-label">Detalhe do Cargo
                                            (ex: "DE GRADUAÇÃO")</label>
                                        <input type="text" class="form-control" id="position-title-detail-input">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="position-image-input" class="form-label">Foto do Membro
                                        (Opcional)</label>
                                    <input type="file" class="form-control" id="position-image-input" accept="image/*">
                                    <small class="form-text text-muted">Se nenhuma imagem for enviada, uma imagem padrão
                                        será usada.</small>
                                </div>
                                <button type="submit" class="btn btn-primary">Salvar</button>
                                <button type="button" class="btn btn-light" id="cancel-edit-position-btn"
                                    style="display: none;">Cancelar Edição</button>
                            </form>
                            <div id="position-feedback" class="mt-3"></div>
                        </div>
                    </div>

                    <h4>Membros Atuais</h4>
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">Foto</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Cargo</th>
                                    <th scope="col">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="positions-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="posts-view" class="d-none">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Gerenciar Posts do Blog</h1>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header" id="post-form-title">
                            Criar Novo Post
                        </div>
                        <div class="card-body">
                            <form id="post-form">
                                <input type="hidden" id="post-id-input">

                                <div class="mb-3">
                                    <label for="post-title-input" class="form-label">Título do Post</label>
                                    <input type="text" class="form-control" id="post-title-input" required>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="post-listCover-input" class="form-label">Capa para Listagem
                                            (Card)</label>
                                        <input type="file" class="form-control" id="post-listCover-input"
                                            accept="image/*">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="post-postCover-input" class="form-label">Capa de Destaque (Topo do
                                            Post)</label>
                                        <input type="file" class="form-control" id="post-postCover-input"
                                            accept="image/*">
                                    </div>
                                </div>

                                <hr>
                                <h5>Conteúdo do Post</h5>
                                <div id="post-content-container">
                                    <div class="content-pair mb-3 border p-3 rounded">
                                        <div class="mb-2">
                                            <label class="form-label">Subtítulo</label>
                                            <input type="text" class="form-control" name="subtitle">
                                        </div>
                                        <div>
                                            <label class="form-label">Parágrafo</label>
                                            <textarea class="form-control" name="paragraph" rows="4"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary mb-3" id="add-content-pair-btn">Adicionar
                                    Bloco (Subtítulo + Parágrafo)</button>
                                <hr>

                                <button type="submit" class="btn btn-primary">Salvar Post</button>
                                <button type="button" class="btn btn-light" id="cancel-edit-post-btn"
                                    style="display: none;">Cancelar Edição</button>
                            </form>
                            <div id="post-feedback" class="mt-3"></div>
                        </div>
                    </div>

                    <h4>Posts Publicados</h4>
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">Título</th>
                                    <th scope="col">Data de Criação</th>
                                    <th scope="col">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="posts-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="/js/admin.js"></script>
</body>

</html>